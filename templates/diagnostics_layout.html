{% macro render_diagnostics(report, template_dir) -%}
<div class="page">
  {% set asset_base = template_asset_base or ('file:///' ~ template_dir) %}
  <div class="diag-frame diag-frame-main"></div>
  <div class="diag-frame diag-frame-inner"></div>
  <div class="diag-shape diag-tri-left"></div>
  <div class="diag-shape diag-tri-right"></div>
  <div class="diag-shape diag-zigzag"></div>
  <div class="diag-shape diag-diamond"></div>
  <div class="diag-shape diag-chevron"></div>
  <div class="diag-shape diag-stripes"></div>
  <div class="diag-plane"></div>
  <div class="diag-rocket"></div>
  <div class="diag-cloud diag-cloud-left"></div>
  <div class="diag-cloud diag-cloud-right"></div>
  <div class="diag-decor diag-decor-top-left"></div>
  <div class="diag-decor diag-decor-top-right"></div>
  <div class="diag-decor diag-decor-bottom-left"></div>
  <div class="diag-decor diag-decor-bottom-right"></div>
  <div class="diag-content">
    <div class="header">
      <img class="logo" src="{{ asset_base }}/faizan_academy_logo.png" alt="Faizan Academy logo">
      <div class="header-content">
        <h1 class="school-name">FAIZAN ACADEMY</h1>
        <div class="school-subtitle">Under The Management of Memon Madressah Faizul Uloom (Regd.)</div>
        <div class="school-address">ST 8/A, Opp. Memon Siddigbad, Haji Rasheed "B" Area, Karachi-75950</div>
        <div class="school-meta">Phone: 021-36370112 | Email: faizanacademy03@gmail.com</div>
      </div>
    </div>

    <div class="divider"></div>

    <div class="diag-head">
      <div class="diag-ribbon">DIAGNOSTICS EXAMINATION</div>
    </div>

    <div class="diag-divider"><span>Student Details</span></div>
    <div class="info-lines">
      <div class="info-line info-line-split">
        <div class="info-block">
          <span class="info-label">Student's Name:</span>
          <span class="info-fill">
            <span class="info-text" style="font-size: {{ report.student_name_font_size or 18 }}px;">{{
              report.student_name }}</span>
            <span class="info-rule"></span>
          </span>
        </div>
        <div class="info-block">
          <span class="info-label">Father's Name:</span>
          <span class="info-fill">
            <span class="info-text" style="font-size: {{ report.father_name_font_size or 18 }}px;">{{ report.father_name
              }}</span>
            <span class="info-rule"></span>
          </span>
        </div>
      </div>
    </div>
    <table class="info-table">
      <colgroup>
        <col style="width: 12%;">
        <col style="width: 21%;">
        <col style="width: 12%;">
        <col style="width: 21%;">
        <col style="width: 12%;">
        <col style="width: 22%;">
      </colgroup>
      <tr>
        <th>Class/Sec:</th>
        <td>{{ report.class_sec }}</td>
        <th>G.R No:</th>
        <td>{{ report.gr_no }}</td>
        <th>Rank in Class:</th>
        <td>{{ report.rank }}</td>
      </tr>
      <tr>
        <th>Total School Days:</th>
        <td>{{ report.total_days }}</td>
        <th>Days Attended:</th>
        <td>{{ report.days_attended }}</td>
        <th>Days Absent:</th>
        <td>{{ report.days_absent }}</td>
      </tr>
    </table>
    <div class="diag-divider"><span>Learning Areas</span></div>
    <div class="diag-grid">
      {% for section in report.diagnostics_sections %}
      <div class="diag-card">
        <div class="diag-card-title">{{ section.title }}</div>
        <table class="diag-table">
          <tbody>
            {% for row in section.rows %}
            <tr>
              <td>{{ row.label }}</td>
              <td>{{ row.value }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      {% endfor %}
    </div>

    <div class="diag-comment">
      <span class="diag-label">Comment:</span>
      <span class="diag-value">{{ report.comment }}</span>
    </div>

    <div class="diag-signatures">
      <div class="diag-signature">
        <div class="line"></div>
        <div>Teacher's Signature</div>
      </div>
      <div class="diag-signature">
        <div class="line"></div>
        <div>Principal's Signature</div>
      </div>
    </div>
  </div>
</div>
{%- endmacro %}